<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Indo-European – Yapi Linguistics</title>

  <style>
    :root {
      --blue: #0067a5;
      --border: #ccc;
      --bg: #fafafa;
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font: 14px/1.5 "Helvetica Neue", Helvetica, Arial, sans-serif;
      background: var(--bg);
      color: #222;
      padding-bottom: 4rem;
    }
    header {
      background: var(--blue);
      color: #fff;
      padding: 0.7rem 1rem;
      font-size: 1.2rem;
      font-weight: 600;
    }
    header a { color: #fff; text-decoration: none; font-weight: 700; }
    .card {
      max-width: 900px;
      margin: 1rem auto;
      background: #fff;
      border: 1px solid var(--border);
      padding: 1rem 1.2rem;
    }
    h1 {
      font-size: 1.4rem;
      margin: 0 0 .6rem;
      color: var(--blue);
    }
    #breadcrumbs {
      font-size: 0.9rem;
      color: #555;
      margin-bottom: 0.8rem;
    }

    /* Tree */
    ul.tree, ul.tree ul { list-style:none; margin:0; padding-left:1rem; position:relative; }
    ul.tree ul::before {
      content:""; position:absolute; top:0; bottom:0; left:0;
      border-left:1px solid var(--border);
    }
    ul.tree li {
      position:relative; padding:0.35rem 0 0.35rem 0.9rem; cursor:default;
    }
    ul.tree li::before {
      content:""; position:absolute; top:1.05rem; left:0; width:0.9rem;
      border-top:1px solid var(--border);
    }
    .caret {
      user-select:none; margin-right:6px; font-size:1.2rem; line-height:0;
      vertical-align:middle; cursor:pointer; color:var(--blue);
    }
    .caret::before { content:"▸"; }
    .caret-open::before { content:"▾"; }
    .nested { display:none; }
    .open   { display:block; }
    .node   { color:var(--blue); }
    .path   { background:rgba(0,103,165,0.08); }
  </style>
</head>
<body>
  <header><a href="/">Yapi Linguistics</a> / Indo-European</header>

  <div class="card">
    <h1 id="title">Indo-European</h1>
    <div id="breadcrumbs">Indo-European</div>
    <ul class="tree" id="treeRoot"></ul>
  </div>

  <script>
    fetch("indo_european_tree_fixed2.json")
      .then(res => res.json())
      .then(root => buildTree(root))
      .catch(err => {
        document.getElementById("treeRoot").textContent = "Could not load tree.";
        console.error(err);
      });

    function buildTree(root) {
      const ul = document.getElementById("treeRoot");
      ul.appendChild(makeLi(root, []));

      function makeLi(node, ancestry) {
        const li = document.createElement("li");
        const label = document.createElement("span");
        label.textContent = node.name;
        label.className = "node";
        label.onclick = () => select(node, ancestry);

        if (node.children && node.children.length) {
          const caret = document.createElement("span");
          caret.className = "caret";
          caret.onclick = e => {
            e.stopPropagation();
            caret.classList.toggle("caret-open");
            sub.classList.toggle("open");
          };
          li.appendChild(caret);
        }
        li.appendChild(label);

        if (node.children && node.children.length) {
          const sub = document.createElement("ul");
          sub.className = "nested";
          node.children
              .sort((a, b) => a.name.localeCompare(b.name))
              .forEach(child => sub.appendChild(makeLi(child, ancestry.concat(node))));
          li.appendChild(sub);
        }
        return li;
      }

      function select(node, ancestry) {
        document.querySelectorAll(".path").forEach(el => el.classList.remove("path"));
        ancestry.concat(node).forEach(n => {
          const span = [...document.querySelectorAll(".node")].find(el => el.textContent === n.name);
          if (span) span.classList.add("path");
        });
        document.getElementById("title").textContent = node.name;
        document.getElementById("breadcrumbs").textContent =
          ancestry.concat(node).map(n => n.name).join(" » ");
      }
    }
  </script>
</body>
</html>